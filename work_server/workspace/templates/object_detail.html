{% extends "base_generic.html" %} {% block content %}
<title>{{ object }}</title>
<header class="header">
  <div class="container">
    <div class="header-content">
      <nav class="nav-left">
        <a href="/workspace" class="nav-link">Главная <i class="bi bi-house-fill"></i></a>
      </nav>
    </div>
  </div>
</header>
<div class="centered_page">
  <div class="item_block" style="width: 95%">
    <h1>Объект №{{ object.obj_number }}</h1>
  </div>
  <div id="object_details">{% include 'partials/object_details.html' %}</div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    function updateData() {
      $.ajax({
        url: window.location.pathname,
        headers: {
          "X-Requested-With": "XMLHttpRequest",
        },
        success: function (data) {
          if (data.html != "") {
            $("#object_details").html(data.html);
          }
        },
      });
    }

    // Устанавливаем интервал обновления каждые 5 секунды
    setInterval(updateData, 5000);
  });
</script>
{% endblock %}
